(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){this.fillTweetContainer=t(this.fillTweetContainer,this),this.$el=$(e),$.when(this.setTweet()).done(this.fillTweetContainer)}return e.prototype.$el=null,e.prototype.tweet=null,e.prototype.setTweet=function(){return this.tweetNeedsRefresh()?this.fetchAndCacheTweet():this.tweet=this.getTweetInSessionStorage()},e.prototype.fetchAndCacheTweet=function(){return $.getJSON("../../external.html?link=http://damp-caverns-7793.herokuapp.com/?callback=?").done(function(e){return function(t){var n;return n=t.statuses[0],n.cached_at=Date.now(),e.setTweetInSessionStorage(n),e.tweet=n}}(this))},e.prototype.setTweetInSessionStorage=function(e){return sessionStorage.setItem("tweet",JSON.stringify(e))},e.prototype.getTweetInSessionStorage=function(){return JSON.parse(sessionStorage.tweet)},e.prototype.tweetNeedsRefresh=function(){return!!(!this.haveCachedTweet()||this.haveCachedTweet()&&this.cachedTweetIsExpired())},e.prototype.cachedTweetIsExpired=function(){return!!(this.getTweetInSessionStorage().cached_at<Date.now()-9e5)},e.prototype.haveCachedTweet=function(){return!!sessionStorage.tweet},e.prototype.prepareTweetText=function(e){var t;return t=new RegExp("#([^\\s]*)","g"),e.replace(t,"<span>#$1</span>")},e.prototype.fillTweetContainer=function(){return this.$el.find("img").attr("src",this.tweet.user.profile_image_url),this.$el.find(".tweet-text").html(this.prepareTweetText(this.tweet.text)),this.$el.find(".tweet-user").text(this.tweet.user.screen_name).attr("href","http://twitter.com/"+this.tweet.user.screen_name),this.$el.find(".tweet-time").text($.timeago(new Date(this.tweet.created_at))),"thisbythem"===this.tweet.user.name&&this.$el.find(".tweet-text-link").attr("href","../../external.html?link=http://twitter.com/thisbythem"),this.$el.fadeIn()},e}(),jQuery(function(){return $("[data-behavior~=tweeter-grabber]").each(function(){return new e(this)})})}).call(this);var disqus_shortname="thisbythem";!function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="http://"+disqus_shortname+".disqus.com/count.js",(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(e)}(),function(){$("a[href^=http]").click(function(){var e;return e=new RegExp("/"+window.location.host+"/"),e.test(this.href)?void 0:(window.open(this.href),!1)})}.call(this),function(){}.call(this);